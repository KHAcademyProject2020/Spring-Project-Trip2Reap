<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
    <select id="memberLogin" resultMap="memberResultSet">
        select *
        from member
        where member_id=#{memberId}
              and m_status='Y'
    </select>
    <resultMap type="Member" id="memberResultSet">
        <id column="MEMBER_ID" property="memberId" />
        <result column="MEMBER_PWD" property="memberPwd" />
        <result column="MEMBER_NAMES" property="memberName" />
        <result column="NICKNAME" property="nickName" />
        <result column="GENDER" property="gender" />
        <result column="PHONE" property="phone" />
        <result column="MEMBER_EMAIL" property="email" />
        <result column="M_STATUS" property="mStatus" />
    </resultMap>
    
    <select id="memberCheck" resultType="_int">
        select count(*)
        from member
        where member_id=#{memberId}
    </select>
    
    <select id="nicknameCheck" resultType="_int">
        select count(*)
        from member
        where nickname=#{nickname}
    </select>
    
    <insert id="ranNumCheck">
        insert into certification
        values (#{email},#{randomKey})
    </insert>

</mapper>
